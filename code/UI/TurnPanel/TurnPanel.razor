@namespace Grubs

@* Should turn duration & current player turn be in ffa? *@
@if (GamemodeSystem.Instance is not FreeForAll ffa)
{
    return;
}

<root>
    <label class="timer" text=@FormatAsTimer(ffa.TimeUntilNextTurn) />
    <label class="name" text=@($"{@ffa.ActivePlayer.Client.Name}'s Turn") />
</root>

@code {
    private string FormatAsTimer(float time)
    {
        return TimeSpan.FromSeconds( time.CeilToInt() ).ToString( @"ss" );
    }

    protected override int BuildHash()
    {
        if (GamemodeSystem.Instance is FreeForAll ffa)
            return HashCode.Combine(FormatAsTimer(ffa.TimeUntilNextTurn), ffa.ActivePlayer.Client.SteamId);

        return HashCode.Combine(-1);
    }
}

<style>
    TurnPanel {
        position: absolute;
        bottom: 125px;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
        flex-direction: column;
        align-items: center;
        width: 1000px;

        .timer, .name {
            font-family: Londrina Solid;
            font-size: 80px;
            color: white;
            text-shadow: 2px 2px 0px black;
        }

        .name {
            position: absolute;
            bottom: -30px;
            font-size: 40px;
        }

        &.hide {

        }
    }
</style>